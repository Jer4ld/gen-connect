{% extends "base.html" %}

{% block title %}Achievements - GenConnect{% endblock %}

{% block extra_css %}
<style>
    /* --- RESET & BASE --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
        background-color: #f0f4f8; /* Premium Cool Grey */
        font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif; 
        color: #1e293b;
    }

    .container { display: flex; min-height: 100vh; }

    /* --- SIDEBAR (Matches Profile Exactly) --- */
    .sidebar {
        position: fixed; left: 0; top: 0; width: 260px; height: 100vh;
        background-color: white; border-right: 1px solid #e2e8f0; 
        padding: 24px 0; z-index: 100;
        box-shadow: 4px 0 24px rgba(0,0,0,0.02);
    }
    
    .sidebar-logo { 
        padding: 0 32px 24px; 
        border-bottom: 1px solid #f1f5f9; 
        margin-bottom: 24px; 
        display: flex; align-items: center; gap: 12px; 
        color: #4f46e5; /* Indigo-600 */
        font-weight: 800; font-size: 22px; letter-spacing: -0.5px;
    }
    .sidebar-logo svg { width: 28px; height: 28px; color: #4f46e5; }

    .sidebar-nav { list-style: none; padding: 0 16px; }
    .sidebar-nav li { margin-bottom: 4px; }
    .sidebar-nav a { 
        display: flex; align-items: center; gap: 16px; 
        padding: 12px 20px; border-radius: 12px;
        text-decoration: none; color: #64748b; 
        transition: all 0.2s ease; font-size: 15px; font-weight: 600; 
    }
    .sidebar-nav a:hover { background-color: #f8fafc; color: #0f172a; transform: translateX(4px); }
    .sidebar-nav a.active { 
        background-color: #eef2ff; color: #4f46e5; 
        box-shadow: 0 2px 5px rgba(79, 70, 229, 0.05);
    }
    .sidebar-nav svg { width: 20px; height: 20px; }

    /* --- MAIN CONTENT --- */
    .main-content { margin-left: 260px; flex: 1; padding: 40px; }
    .page-container { max-width: 1100px; margin: 0 auto; }

    /* --- PAGE HEADER --- */
    .page-header { margin-bottom: 30px; }
    .page-title { font-size: 28px; font-weight: 800; color: #0f172a; letter-spacing: -0.5px; margin-bottom: 5px; }
    .page-subtitle { color: #64748b; font-size: 15px; }

    /* --- 1. HERO LEVEL CARD --- */
    .level-hero-card {
        background: linear-gradient(135deg, #4f46e5 0%, #3730a3 100%);
        border-radius: 20px; padding: 40px; color: white;
        box-shadow: 0 20px 40px -10px rgba(79, 70, 229, 0.4);
        position: relative; overflow: hidden; margin-bottom: 40px;
        display: flex; align-items: center; justify-content: space-between;
    }
    
    /* Background Decoration */
    .level-hero-card::after {
        content: ""; position: absolute; right: 0; bottom: 0;
        width: 300px; height: 300px; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>') no-repeat center center;
        opacity: 0.05; transform: rotate(-15deg) scale(1.5); pointer-events: none;
    }

    .level-info { z-index: 2; flex: 1; }
    .level-label { 
        font-size: 13px; font-weight: 700; text-transform: uppercase; 
        letter-spacing: 1px; opacity: 0.8; margin-bottom: 5px; 
    }
    .level-display { font-size: 48px; font-weight: 900; line-height: 1; margin-bottom: 20px; }
    
    /* Progress Bar */
    .progress-container { max-width: 500px; }
    .progress-labels { display: flex; justify-content: space-between; font-size: 13px; font-weight: 600; margin-bottom: 8px; }
    .progress-track { background: rgba(255,255,255,0.2); height: 12px; border-radius: 6px; overflow: hidden; }
    .progress-fill { 
        background: #fbbf24; height: 100%; width: 62%; border-radius: 6px; 
        box-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
    }

    /* Stats on Right */
    .hero-stats { 
        display: flex; gap: 40px; z-index: 2; 
        background: rgba(255,255,255,0.1); padding: 20px 30px; 
        border-radius: 16px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);
    }
    .hero-stat-item { text-align: center; }
    .hero-stat-val { font-size: 24px; font-weight: 800; display: block; }
    .hero-stat-label { font-size: 12px; font-weight: 600; opacity: 0.8; text-transform: uppercase; }

    /* --- 2. BADGE GRID SECTION --- */
    .section-header { 
        display: flex; justify-content: space-between; align-items: center; 
        margin-bottom: 25px; border-bottom: 2px solid #e2e8f0; padding-bottom: 15px; 
    }
    .section-title { font-size: 18px; font-weight: 800; color: #0f172a; }
    
    /* Filter Buttons */
    .filter-tabs { display: flex; gap: 10px; }
    .filter-btn {
        background: white; border: 1px solid #cbd5e1; color: #64748b;
        padding: 8px 20px; border-radius: 20px; font-size: 14px; font-weight: 600;
        cursor: pointer; transition: all 0.2s;
    }
    .filter-btn:hover { border-color: #4f46e5; color: #4f46e5; }
    .filter-btn.active { background: #4f46e5; border-color: #4f46e5; color: white; box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2); }

    /* Grid */
    .badges-grid { 
        display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); 
        gap: 24px; 
    }

    .badge-card {
        background: white; border-radius: 16px; padding: 30px 20px; text-align: center;
        border: 1px solid #e2e8f0; transition: all 0.3s; position: relative;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    }
    
    /* Earned State */
    .badge-card.earned { border-bottom: 4px solid #10b981; }
    .badge-card.earned:hover { transform: translateY(-5px); box-shadow: 0 15px 30px -5px rgba(0,0,0,0.1); }
    
    /* Locked State */
    .badge-card.locked { opacity: 0.7; background: #f8fafc; border-style: dashed; }
    .badge-card.locked .badge-icon { filter: grayscale(100%); opacity: 0.5; }

    .badge-icon { 
        font-size: 48px; margin-bottom: 15px; display: inline-block;
        background: #f1f5f9; width: 90px; height: 90px; line-height: 90px; border-radius: 50%;
    }
    .badge-card.earned .badge-icon { background: #dcfce7; } /* Green bg for earned */

    .badge-name { font-size: 16px; font-weight: 700; color: #0f172a; margin-bottom: 6px; }
    .badge-desc { font-size: 13px; color: #64748b; line-height: 1.4; margin-bottom: 15px; min-height: 36px; }
    
    .badge-date { 
        font-size: 11px; font-weight: 600; color: #10b981; 
        background: #ecfdf5; padding: 4px 12px; border-radius: 12px; display: inline-block;
    }
    .badge-lock-text {
        font-size: 11px; font-weight: 600; color: #94a3b8; 
        display: flex; align-items: center; justify-content: center; gap: 5px;
    }

    @media (max-width: 1024px) {
        .level-hero-card { flex-direction: column; align-items: flex-start; gap: 30px; }
        .hero-stats { width: 100%; justify-content: space-around; }
    }
    @media (max-width: 768px) {
        .sidebar { width: 70px; }
        .sidebar-nav a span { display: none; }
        .main-content { margin-left: 70px; padding: 20px; }
    }
</style>
{% endblock %}

{% block content %}

{% set all_badges = [
    {'name': 'Early Adopter', 'icon': 'üöÄ', 'desc': 'Joined GenConnect in 2025', 'earned': True, 'date': 'Jan 12, 2026'},
    {'name': 'First Hello', 'icon': 'üëã', 'desc': 'Posted your first message', 'earned': True, 'date': 'Jan 13, 2026'},
    {'name': 'Profile Pro', 'icon': 'üì∏', 'desc': 'Completed your profile', 'earned': True, 'date': 'Jan 14, 2026'},
    {'name': 'Conversation Starter', 'icon': 'üí¨', 'desc': 'Started 10 discussions', 'earned': True, 'date': 'Jan 15, 2026'},
    {'name': 'Helpful Hand', 'icon': 'ü§ù', 'desc': 'Received 50 likes on comments', 'earned': True, 'date': 'Jan 18, 2026'},
    {'name': 'Night Owl', 'icon': 'üåô', 'desc': 'Posted after midnight', 'earned': True, 'date': 'Jan 20, 2026'},
    {'name': 'Connector', 'icon': 'üîó', 'desc': 'Added 5 friends', 'earned': True, 'date': 'Jan 21, 2026'},
    {'name': 'Streak Master', 'icon': 'üî•', 'desc': 'Logged in 7 days in a row', 'earned': True, 'date': 'Jan 22, 2026'},
    {'name': 'Community Pillar', 'icon': 'üèõÔ∏è', 'desc': 'Created a group with 5+ members', 'earned': False},
    {'name': 'Trendsetter', 'icon': '‚ú®', 'desc': 'Post reached 100 likes', 'earned': False},
    {'name': 'Mentor', 'icon': 'üéì', 'desc': 'Guided a younger member', 'earned': False},
    {'name': 'Event Planner', 'icon': 'üìÖ', 'desc': 'Created an event', 'earned': False}
] %}

<div class="container">
    <aside class="sidebar">
        <div class="sidebar-logo">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
            <span>GenConnect</span>
        </div>
        <ul class="sidebar-nav">
            <li><a href="{{ url_for('home') }}"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Home</span></a></li>
            <li><a href="#"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg><span>Explore Activities</span></a></li>
            <li><a href="#"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg><span>Community</span></a></li>
            <li><a href="#"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg><span>Create</span></a></li>
            <li><a href="#"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg><span>Notification</span></a></li>
            <li><a href="{{ url_for('messages') }}"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg><span>Messages</span></a></li>
            <li><a href="{{ url_for('profile') }}"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span>Profile</span></a></li>
            <li><a href="{{ url_for('logout') }}"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg><span>Logout</span></a></li>
        </ul>
    </aside>

    <main class="main-content">
        <div class="page-container">
            <div class="page-header">
                <h1 class="page-title">My Achievements</h1>
                <p class="page-subtitle">Track your contribution journey and showcase your milestones.</p>
            </div>

            <div class="level-hero-card">
                <div class="level-info">
                    <span class="level-label">Current Rank</span>
                    <h2 class="level-display">Level 5 Contributor</h2>
                    
                    <div class="progress-container">
                        <div class="progress-labels">
                            <span>1,240 XP</span>
                            <span>2,000 XP</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-fill"></div>
                        </div>
                        <div style="font-size:12px; margin-top:8px; opacity:0.8;">
                            üéâ You're in the top 15% of contributors this month!
                        </div>
                    </div>
                </div>

                <div class="hero-stats">
                    <div class="hero-stat-item">
                        <span class="hero-stat-val">{{ all_badges|length }}</span>
                        <span class="hero-stat-label">Total Badges</span>
                    </div>
                    <div class="hero-stat-item">
                        <span class="hero-stat-val">#42</span>
                        <span class="hero-stat-label">Global Rank</span>
                    </div>
                </div>
            </div>

            <div class="section-header">
                <h3 class="section-title">All Badges</h3>
                <div class="filter-tabs">
                    <button class="filter-btn active" onclick="filterBadges('all')">All</button>
                    <button class="filter-btn" onclick="filterBadges('earned')">Earned</button>
                    <button class="filter-btn" onclick="filterBadges('locked')">Locked</button>
                </div>
            </div>

            <div class="badges-grid">
                {% for badge in all_badges %}
                <div class="badge-card {% if badge.earned %}earned{% else %}locked{% endif %}" data-status="{% if badge.earned %}earned{% else %}locked{% endif %}">
                    <div class="badge-icon">{{ badge.icon }}</div>
                    <h3 class="badge-name">{{ badge.name }}</h3>
                    <p class="badge-desc">{{ badge.desc }}</p>
                    
                    {% if badge.earned %}
                        <div class="badge-date">Earned on {{ badge.date }}</div>
                    {% else %}
                        <div class="badge-lock-text">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                            Locked
                        </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>

        </div>
    </main>
</div>

<script>
    // FILTER LOGIC
    function filterBadges(status) {
        // 1. Update Buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
            // Check content text to match button
            if(btn.innerText.toLowerCase() === status.toLowerCase()) {
                btn.classList.add('active');
            }
        });

        // 2. Filter Cards
        const cards = document.querySelectorAll('.badge-card');
        cards.forEach(card => {
            if (status === 'all') {
                card.style.display = 'block';
            } else {
                if (card.dataset.status === status) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            }
        });
    }
</script>
{% endblock %}