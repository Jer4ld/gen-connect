{% extends "base.html" %}

{% block title %}{{ user.username }} - GenConnect{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
    /* --- RESET & ANIMATIONS --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    body { 
        /* IT CLASSROOM BACKGROUND */
        background: 
            linear-gradient(rgba(248, 250, 252, 0.92), rgba(248, 250, 252, 0.92)),
            url('https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=1600&fit=crop'); 
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
        
        font-family: 'Outfit', -apple-system, sans-serif; 
        color: #1e293b;
        transition: font-size 0.2s ease;
    }

    /* --- SIDEBAR STYLES (EXACTLY LIKE MESSAGES.HTML - NO GAPS) --- */
    .container { display: flex; min-height: 100vh; }
    
    .sidebar { 
        position: fixed; left: 0; top: 0; width: 250px; height: 100vh; 
        background-color: white; /* Solid White */
        border-right: 1px solid #e5e7eb; 
        padding: 20px 0; z-index: 100; 
        display: flex; flex-direction: column;
    }

    .sidebar-logo { 
        padding: 0 30px 20px; border-bottom: 1px solid #e5e7eb; margin-bottom: 20px; 
    }
    
    .logo { 
        display: flex; align-items: center; gap: 10px; 
        font-size: 20px; font-weight: 600; color: #6366f1; text-decoration: none; 
    }

    /* REMOVED PADDING HERE TO REMOVE THE SPACE */
    .sidebar-nav { list-style: none; padding: 0; margin: 0; flex: 1; }
    .sidebar-nav li { margin: 5px 0; }

    /* RECTANGULAR LINKS (No Border Radius, Edge-to-Edge) */
    .sidebar-nav a { 
        display: flex; align-items: center; gap: 15px; 
        padding: 12px 30px; /* Aligns with logo padding */
        text-decoration: none; color: #374151; 
        transition: all 0.2s; font-size: 15px; 
        border-radius: 0; /* Ensures no curves */
    }

    .sidebar-nav a:hover { background-color: #f9fafb; }

    /* ACTIVE STATE (Blue Border on Left/Right) */
    .sidebar-nav a.active { 
        background-color: #eff6ff; 
        color: #2563eb; 
        border-right: 3px solid #2563eb; 
    }

    .sidebar-nav svg { width: 22px; height: 22px; }

    /* --- MAIN CONTENT STYLES --- */
    .main-content { margin-left: 250px; flex: 1; padding: 40px; animation: fadeIn 0.6s ease-out; }
    .profile-container { max-width: 1100px; margin: 0 auto; }

    /* --- BANNER & HERO --- */
    .profile-hero {
        background: white; border-radius: 24px; 
        border: 1px solid white;
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.08);
        overflow: hidden; margin-bottom: 30px;
        position: relative;
    }

    .hero-banner {
        height: 220px; width: 100%;
        background-color: #1e293b; /* Dark Banner */
        position: relative;
    }
    
    .hero-banner img { 
        width: 100%; height: 100%; object-fit: cover; 
        filter: brightness(0.6); 
    }
    
    .hero-banner::after {
        content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 100px;
        background: linear-gradient(to top, rgba(0,0,0,0.4), transparent);
    }

    .hero-content {
        padding: 0 40px 30px 40px;
        display: flex; justify-content: space-between; align-items: flex-end;
        position: relative; margin-top: -60px;
    }

    .identity-group { display: flex; align-items: flex-end; gap: 24px; }

    .avatar-wrapper {
        width: 140px; height: 140px;
        border-radius: 50%; border: 5px solid white;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        background: white; overflow: hidden;
        position: relative; z-index: 2;
    }
    .avatar-wrapper img { width: 100%; height: 100%; object-fit: cover; }

    .user-text { padding-bottom: 10px; z-index: 2; }
    .username { font-size: 36px; font-weight: 800; color: #0f172a; line-height: 1; margin-bottom: 6px; text-shadow: 2px 2px 0px white; }
    .user-badge {
        display: inline-flex; align-items: center; gap: 6px;
        background: #0f172a; color: white; 
        font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
        padding: 6px 14px; border-radius: 20px; box-shadow: 0 4px 10px rgba(15, 23, 42, 0.3);
    }

    .hero-actions { display: flex; gap: 12px; padding-bottom: 15px; }

    .btn-action {
        padding: 10px 20px; border-radius: 12px; font-weight: 600; font-size: 14px;
        text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
        transition: all 0.2s; cursor: pointer; border: none;
    }
    .btn-primary { background: #4f46e5; color: white; box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(79, 70, 229, 0.4); }
    .btn-glass { background: rgba(255, 255, 255, 0.8); border: 1px solid #e2e8f0; color: #334155; }
    .btn-glass:hover { background: #f8fafc; border-color: #94a3b8; }
    .btn-mini { font-size: 12px; padding: 4px 10px; background: #e0e7ff; color: #4338ca; border-radius: 6px; font-weight: 700; text-decoration: none; }

    /* --- LAYOUT GRID --- */
    .profile-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-top: 30px; }
    .content-column { display: flex; flex-direction: column; gap: 30px; }
    .sidebar-column { display: flex; flex-direction: column; gap: 24px; position: sticky; top: 30px; height: fit-content; }

    /* --- DASHBOARD --- */
    .glass-panel { background: white; border-radius: 20px; padding: 24px; border: 1px solid #e2e8f0; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }
    .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

    .dash-item {
        background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px);
        border-radius: 24px; padding: 24px; position: relative; overflow: hidden; transition: all 0.3s;
        border: 1px solid rgba(255, 255, 255, 0.4); text-decoration: none; color: inherit; display: flex; flex-direction: column;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
    }
    .dash-item:hover { transform: translateY(-3px); background: rgba(255, 255, 255, 0.8); box-shadow: 0 12px 40px rgba(31, 38, 135, 0.1); }

    .level-section { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
    .level-icon { font-size: 40px; }
    .level-details { display: flex; flex-direction: column; }
    .big-num { font-size: 36px; font-weight: 800; line-height: 1; color: #1e293b; }
    .sub-text { font-size: 14px; color: #64748b; font-weight: 500; }
    .card-separator { border: 0; height: 1px; background: rgba(100, 116, 139, 0.2); margin: 0 0 20px 0; }
    .badge-section { display: flex; align-items: center; justify-content: space-between; }
    .badge-stack { display: flex; }

    .mini-badge { width: 44px; height: 44px; border-radius: 50%; background: white; border: 3px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.08); display: flex; align-items: center; justify-content: center; font-size: 22px; margin-right: -12px; position: relative; }
    .bg-rank-1 { background-color: #f87171; }
    .bg-rank-2 { background-color: #fbbf24; }
    .bg-rank-3 { background-color: #60a5fa; }
    .badge-view-all { font-size: 14px; font-weight: 600; color: #4f46e5; display: flex; align-items: center; gap: 4px; }

    .points-section { display: flex; align-items: center; gap: 16px; margin: 24px 0; }
    .coin-icon-large {
        width: 50px; height: 50px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        color: #78350f; border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-weight: 800; font-size: 28px; border: 3px solid #fcd34d; box-shadow: 0 4px 10px rgba(251, 191, 36, 0.4);
    }
    .points-num { font-size: 36px; font-weight: 800; color: #1e293b; line-height: 1; }
    .points-label { font-size: 14px; font-weight: 600; color: #64748b; }
    
    .btn-exchange {
        background: linear-gradient(135deg, #eef2ff 0%, #c7d2fe 100%); color: #3730a3;
        border: none; padding: 12px 20px; border-radius: 12px; font-weight: 700; font-size: 15px; width: 100%;
        display: flex; align-items: center; justify-content: center; gap: 10px; cursor: pointer; transition: all 0.2s;
        box-shadow: 0 4px 12px rgba(199, 210, 254, 0.4);
    }
    .btn-exchange:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(199, 210, 254, 0.6); }
    .gift-icon { font-size: 18px; }

    .stats-bar { display: flex; gap: 20px; justify-content: space-between; background: #f8fafc; padding: 15px 25px; border-radius: 16px; border: 1px solid #f1f5f9; }
    .stat-box { display: flex; flex-direction: column; cursor: pointer; transition: 0.2s; align-items: center; }
    .stat-box:hover .stat-num { color: #4f46e5; }
    .stat-num { font-size: 18px; font-weight: 800; color: #1e293b; }
    .stat-label { font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; }

    .tags-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .skill-pill { padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 600; cursor: pointer; transition: 0.2s; position: relative; overflow: hidden; }
    .pill-green { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
    .pill-blue { background: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; }
    .pill-purple { background: #f3e8ff; color: #6b21a8; border: 1px solid #e9d5ff; }
    .skill-pill:hover::after { content: "Request Help"; position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: inherit; display: flex; align-items: center; justify-content: center; font-weight: 800; animation: fadeIn 0.2s; }
    
    .tabs-nav { display: flex; gap: 25px; border-bottom: 2px solid #e2e8f0; margin-bottom: 24px; }
    .tab-link { padding: 0 5px 12px; font-weight: 700; color: #94a3b8; cursor: pointer; font-size: 15px; position: relative; transition: 0.2s; }
    .tab-link:hover { color: #475569; }
    .tab-link.active { color: #4f46e5; }
    .tab-link.active::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 2px; background: #4f46e5; }

    .content-card { background: white; border-radius: 16px; border: 1px solid #e2e8f0; overflow: hidden; margin-bottom: 20px; display: flex; transition: 0.2s; }
    .content-card:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); border-color: #cbd5e1; }
    .card-thumb { width: 180px; height: auto; object-fit: cover; }
    .card-body { padding: 20px; flex: 1; display: flex; flex-direction: column; }
    .card-h { font-size: 17px; font-weight: 700; color: #0f172a; margin-bottom: 6px; }
    .card-p { font-size: 14px; color: #64748b; line-height: 1.5; margin-bottom: 12px; flex: 1; }
    .card-ft { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #f1f5f9; padding-top: 12px; font-size: 12px; font-weight: 600; color: #94a3b8; }

    .list-item { display: flex; align-items: center; gap: 15px; padding: 15px; background: white; border: 1px solid #e2e8f0; border-radius: 12px; margin-bottom: 15px; transition: 0.2s; }
    .list-item:hover { border-color: #4f46e5; box-shadow: 0 4px 12px rgba(79, 70, 229, 0.1); }
    .list-icon { width: 50px; height: 50px; background: #f1f5f9; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
    
    /* SENIOR MODE OVERRIDES FOR SIDEBAR */
    body.senior-mode .sidebar { width: 280px; }
    body.senior-mode .main-content { margin-left: 280px; }
    body.senior-mode .sidebar-nav a { padding: 16px 30px; font-size: 18px; }

    @media (max-width: 1024px) {
        .profile-grid { grid-template-columns: 1fr; }
        .sidebar-column { display: none; } 
        .hero-content { flex-direction: column; align-items: center; text-align: center; margin-top: -50px; }
        .content-card { flex-direction: column; }
        .card-thumb { width: 100%; height: 160px; }
        .dash-grid { grid-template-columns: 1fr; }
    }
</style>
{% endblock %}

{% block content %}
{% set user_badges = [
    {'icon': 'üöÄ', 'name': 'Rocket Starter'},
    {'icon': 'ü§ù', 'name': 'Community Helper'},
    {'icon': 'üíª', 'name': 'Code Wizard'},
    {'icon': 'üéì', 'name': 'Mentor'}
] %}

<div class="container">
    
    <aside class="sidebar">
    <div class="sidebar-logo">
        <a href="/" class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
            <span>GenConnect</span>
        </a>
    </div>
    <ul class="sidebar-nav">
        <li><a href="{{ url_for('home') }}"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Home</span></a></li>
        
        <li><a href="#"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg><span>Explore Activities</span></a></li>
        
        <li><a href="#"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg><span>Community</span></a></li>
        
        <li><a href="#"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg><span>Create</span></a></li>
        
        <li><a href="{{ url_for('notifications_page') }}"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg><span>Notification</span></a></li>
        
        <li><a href="{{ url_for('messages') }}"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg><span>Message</span></a></li>
        
        <li><a href="{{ url_for('profile') }}"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span>Profile</span></a></li>
        
        <li style="margin-top: 20px; border-top: 1px solid #e5e7eb;"></li>
        
        <li><a href="#" onclick="toggleSeniorMode()" style="color: #059669;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg><span>Senior Mode (Aa+)</span></a></li>
        
        <li><a href="{{ url_for('logout') }}"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg><span>Logout</span></a></li>
    </ul>
</aside>

    <main class="main-content">
        <div class="profile-container">
            
            <div class="profile-hero">
                <div class="hero-banner">
                    <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=2070&auto=format&fit=crop" alt="Banner">
                </div>
                <div class="hero-content">
                    <div class="identity-group">
                        <div class="avatar-wrapper">
                            {% if user.profile_picture and user.profile_picture != 'default.jpg' %}
                                <img src="{{ user.profile_picture }}" alt="User">
                            {% else %}
                                <img src="https://images.unsplash.com/photo-1595152772835-219674b2a8a6?w=400&h=400&fit=crop" alt="IT Student">
                            {% endif %}
                        </div>
                        <div class="user-text">
                            <h1 class="username">{{ user.username }}</h1>
                            <div class="user-badge">{{ user.member_type }}</div>
                        </div>
                    </div>

                    <div class="hero-actions">
                        {% if is_own_profile %}
                            <a href="{{ url_for('edit_profile') }}" class="btn-action btn-glass">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                                Edit Profile
                            </a>
                        {% else %}
                            <button class="btn-action btn-primary">Follow</button>
                            <a href="{{ url_for('messages', target_id=user.id) }}" class="btn-action btn-glass">Message</a>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="profile-grid">
                
                <div class="content-column">
                    <div class="dash-grid">
                        <a href="{{ url_for('ranking') }}" class="dash-item">
                            <span class="dash-label">Level & Top Badges</span>
                            <div class="level-section">
                                <div class="level-icon">üöÄ</div>
                                <div class="level-details">
                                    <div class="big-num">Lvl 5</div>
                                    <span class="sub-text">Mentor</span>
                                </div>
                            </div>
                            <hr class="card-separator">
                            <div class="badge-section">
                                <div class="badge-stack">
                                    {% for badge in user_badges[:3] %}
                                        <div class="mini-badge bg-rank-{{ loop.index }}" title="{{ badge.name }}">
                                            {{ badge.icon }}
                                        </div>
                                    {% endfor %}
                                </div>
                                <span class="badge-view-all">View All ‚Üí</span>
                            </div>
                        </a>
                        
                        <a href="{{ url_for('rewards') }}" class="dash-item">
                            <span class="dash-label">Exchange Reward</span>
                            <div class="points-section">
                                <div class="coin-icon-large">$</div>
                                <div>
                                    <div class="points-num">{{ user.points }}</div>
                                    <span class="points-label">GenPoints</span>
                                </div>
                            </div>
                            <button class="btn-exchange">
                                <span class="gift-icon">üéÅ</span> Exchange Rewards ‚Üí
                            </button>
                        </a>
                    </div>

                    <div>
                        <div class="tabs-nav">
                            <div class="tab-link active" onclick="switchTab('posts', event)">Your Posts</div>
                            <div class="tab-link" onclick="switchTab('communities', event)">Communities</div>
                            <div class="tab-link" onclick="switchTab('saved', event)">Saved</div>
                        </div>

                        <div id="tab-posts">
                            {% if user.posts %}
                                {% for post in user.posts %}
                                <div class="content-card">
                                    <img src="{{ post.image_url if post.image_url else 'https://source.unsplash.com/random/400x300/?tech,coding' }}" class="card-thumb">
                                    <div class="card-body">
                                        <div class="card-h">Posted an update</div>
                                        <p class="card-p">{{ post.content }}</p>
                                        <div class="card-ft">
                                            <span>{{ post.created_at.strftime('%B %d, %Y') }}</span>
                                            <span>‚ù§Ô∏è {{ post.get_like_count() }} &nbsp; üí¨ {{ post.get_comment_count() }}</span>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            {% else %}
                                <div class="content-card">
                                    <img src="https://images.unsplash.com/photo-1587620962725-abab7fe55159?w=400&fit=crop" class="card-thumb">
                                    <div class="card-body">
                                        <div class="card-h">Debugging Late Night ‚òï</div>
                                        <p class="card-p">Finally fixed that database connection error! Turns out it was just a missing comma in the connection string. Classic.</p>
                                        <div class="card-ft">
                                            <span>2 hours ago</span>
                                            <span>‚ù§Ô∏è 85 &nbsp; üí¨ 14</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="content-card">
                                    <img src="https://images.unsplash.com/photo-1531403009284-440f080d1e12?w=400&fit=crop" class="card-thumb">
                                    <div class="card-body">
                                        <div class="card-h">Hackathon Ready</div>
                                        <p class="card-p">Building a new app to help seniors track their medication easily. Looking for UI designers to join the team!</p>
                                        <div class="card-ft">
                                            <span>Yesterday</span>
                                            <span>‚ù§Ô∏è 120 &nbsp; üí¨ 32</span>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>

                        <div id="tab-communities" style="display: none;">
                            <div class="list-item">
                                <div class="list-icon" style="color: #3b82f6;">üêç</div>
                                <div>
                                    <div style="font-weight: 700; color: #0f172a;">Python Developers SG</div>
                                    <div style="font-size: 13px; color: #64748b;">A group for Python enthusiasts to share code.</div>
                                </div>
                                <button class="btn-action btn-glass" style="margin-left:auto; padding: 6px 12px; font-size:12px;">View</button>
                            </div>
                            <div class="list-item">
                                <div class="list-icon" style="color: #10b981;">üõ°Ô∏è</div>
                                <div>
                                    <div style="font-weight: 700; color: #0f172a;">CyberSecurity Juniors</div>
                                    <div style="font-size: 13px; color: #64748b;">Learning about ethical hacking and safety.</div>
                                </div>
                                <button class="btn-action btn-glass" style="margin-left:auto; padding: 6px 12px; font-size:12px;">View</button>
                            </div>
                            <div class="list-item">
                                <div class="list-icon" style="color: #6366f1;">‚öõÔ∏è</div>
                                <div>
                                    <div style="font-weight: 700; color: #0f172a;">React & Frontend</div>
                                    <div style="font-size: 13px; color: #64748b;">Discussing the latest in web development.</div>
                                </div>
                                <button class="btn-action btn-glass" style="margin-left:auto; padding: 6px 12px; font-size:12px;">View</button>
                            </div>
                        </div>

                        <div id="tab-saved" style="display: none;">
                            <div class="content-card">
                                <div class="card-body">
                                    <div class="card-h">üìÑ SQL Cheat Sheet 2025</div>
                                    <p class="card-p">Comprehensive guide to Joins, Unions, and Indexing optimization.</p>
                                    <div class="card-ft"><span>Saved from DataScienceHub</span></div>
                                </div>
                            </div>
                            <div class="content-card">
                                <div class="card-body">
                                    <div class="card-h">üé• VS Code Extensions You Need</div>
                                    <p class="card-p">Video tutorial on the best extensions for productivity and formatting.</p>
                                    <div class="card-ft"><span>Saved from TechTube</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-column">
                    <div class="glass-panel">
                        <div class="stats-bar" style="margin: 0 0 20px 0; width: 100%; padding: 15px;">
                            <div class="stat-box"><span class="stat-num">{{ user.get_post_count() }}</span><span class="stat-label">Posts</span></div>
                            <div class="stat-box"><span class="stat-num">{{ user.get_follower_count() }}</span><span class="stat-label">Followers</span></div>
                            <div class="stat-box"><span class="stat-num">{{ user.get_following_count() }}</span><span class="stat-label">Following</span></div>
                        </div>

                        <div class="bio-section">
                            <h3><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> About</h3>
                            <p class="bio-text">{{ user.bio or "IT Student passionate about bridging the digital divide. I love coding in Python and teaching seniors how to use smartphones safely!" }}</p>
                            
                            <h3 style="margin-top:20px; font-size:14px; text-transform: uppercase; color:#64748b;">Ask me about</h3>
                            <div class="tags-container">
                                {% if user.interests %}
                                    {% for interest in user.interests.split(',') %}
                                        <span class="skill-pill {% if loop.index % 3 == 0 %}pill-blue{% elif loop.index % 3 == 1 %}pill-green{% else %}pill-purple{% endif %}">
                                            {{ interest }}
                                        </span>
                                    {% endfor %}
                                {% else %}
                                    <span class="skill-pill pill-blue">Web Dev</span>
                                    <span class="skill-pill pill-green">Cybersecurity</span>
                                    <span class="skill-pill pill-purple">Tech Support</span>
                                    <span class="skill-pill pill-blue">Python</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                            <h3 style="font-size:15px; font-weight:700;">Upcoming Events</h3>
                            <span class="btn-mini" style="cursor:pointer;">+ Create</span>
                        </div>
                        
                        <div style="background:#fff; border:1px solid #e2e8f0; border-radius:12px; padding:12px; margin-bottom:10px; display:flex; gap:12px;">
                            <div style="background:#eff6ff; color:#2563eb; padding:5px 10px; border-radius:8px; text-align:center; min-width:50px; display:flex; flex-direction:column; justify-content:center;">
                                <span style="font-size:10px; font-weight:700; text-transform:uppercase;">Dec</span>
                                <span style="font-size:18px; font-weight:800;">12</span>
                            </div>
                            <div>
                                <h4 style="font-size:14px; font-weight:700; color:#1e293b; margin-bottom:4px;">Python for Seniors</h4>
                                <div style="font-size:12px; color:#64748b; display:flex; align-items:center; gap:4px;">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                                    Community Hall A
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel">
                        <h3 style="font-size:15px; font-weight:700; margin-bottom:15px;">Active Communities</h3>
                        <div style="display:flex; flex-direction:column; gap:12px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div style="width:36px; height:36px; background:#e0e7ff; border-radius:8px; display:flex; align-items:center; justify-content:center; color:#4f46e5; font-weight:bold;">T</div>
                                <div style="font-size:14px; font-weight:600;">Tech Support Group</div>
                            </div>
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div style="width:36px; height:36px; background:#dcfce7; border-radius:8px; display:flex; align-items:center; justify-content:center; color:#166534; font-weight:bold;">G</div>
                                <div style="font-size:14px; font-weight:600;">Gen Z Coders</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
    function switchTab(tabName, event) {
        document.querySelectorAll('.tab-link').forEach(t => t.classList.remove('active'));
        ['posts', 'communities', 'saved'].forEach(name => {
            const el = document.getElementById('tab-' + name);
            if(el) el.style.display = 'none';
        });
        if(event) event.currentTarget.classList.add('active');
        const target = document.getElementById('tab-' + tabName);
        if(target) {
            target.style.display = 'block';
            target.style.animation = 'fadeIn 0.5s ease';
        }
    }

    function toggleSeniorMode() {
        document.body.classList.toggle('senior-mode');
        const isSenior = document.body.classList.contains('senior-mode');
        localStorage.setItem('seniorMode', isSenior);
    }

    if(localStorage.getItem('seniorMode') === 'true') {
        document.body.classList.add('senior-mode');
    }
</script>
{% endblock %}